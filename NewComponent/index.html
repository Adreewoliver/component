<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vagas de Emprego</title>
  <link rel="stylesheet" href="./card.css">
  <script type="module" src="./src/components/CardNews.js" defer></script>
</head>

<body>
  <header>
    <h1 style="text-align:center; margin-top: 20px;color: aliceblue;">Portal de Vagas</h1>
  </header>

  <nav style="text-align:center; margin: 20px 0;">
    <a href="pagina5.html" style="margin-right: 15px; text-decoration: none; color: #ffffff; font-weight: bold;">Cadastrar Vaga</a>
    <a href="index.html" style="text-decoration: none; color: #ffffff; font-weight: bold;">Ver Vagas</a>
  </nav>

  <main>
    <h2 style="text-align:center; margin: 20px 0; color: #ffffff;">Vagas Cadastradas</h2>
    <div id="vagasContainer" style="display: flex; flex-wrap: wrap; justify-content: center;"></div>
  </main>

  <footer style="text-align:center; margin: 40px 0; color: #ffffff;">
    <button id="apagarVagas">ğŸ—‘ï¸ Apagar Todas as Vagas</button>
    <p style="margin-top: 20px;">Â© 2025 vagas | Desenvolvido por Adriano de Oliveira Santos</p>
  </footer>

  <script type="module">
  // Importa as funÃ§Ãµes que precisamos do nosso app.js
  import { getVagas, apagarTodasVagas } from './src/app.js';

  // --- LÃ³gica para carregar os cards ---
  document.addEventListener("DOMContentLoaded", function () {
    const vagas = getVagas(); // <-- USA A FUNÃ‡ÃƒO
    const vagasContainer = document.getElementById("vagasContainer");

    if (vagas.length === 0) {
      vagasContainer.innerHTML = "<p>Nenhuma vaga cadastrada no momento.</p>";
    }

    vagas.forEach((vaga) => {
      const card = document.createElement("card-news");
      card.setAttribute("titulo", vaga.titulo);
      card.setAttribute("descricao", vaga.descricao);
      card.setAttribute("categoria", vaga.categoria);
      card.setAttribute("imagem", vaga.imagem);
      card.setAttribute("nome", vaga.nome);
      card.setAttribute("link", `pagina2.html?id=${vaga.id}`);
      vagasContainer.appendChild(card);
    });
  });

  // --- LÃ³gica do botÃ£o de apagar ---
  document.getElementById("apagarVagas").addEventListener("click", () => {
    if (confirm("Tem certeza que deseja apagar todas as vagas cadastradas?")) {
      apagarTodasVagas(); // <-- USA A FUNÃ‡ÃƒO
      alert("Todas as vagas foram apagadas com sucesso!");
      location.reload();
    }
  });
</script>
</body>

</html>