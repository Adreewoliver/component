<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vagas de Emprego</title>
  <link rel="stylesheet" href="./card.css">
  <script type="module" src="./src/components/CardNews.js" defer></script>
</head>

<body>
  <header>
    <h1 style="text-align:center; margin-top: 20px;color: aliceblue;">Portal de Vagas</h1>
  </header>

  <nav style="text-align:center; margin: 20px 0;">
    <a href="pagina5.html" style="margin-right: 15px; text-decoration: none; color: #ffffff; font-weight: bold;">Cadastrar Vaga</a>
    <a href="index.html" style="text-decoration: none; color: #ffffff; font-weight: bold;">Ver Vagas</a>
  </nav>

  <main>
    <h2 style="text-align:center; margin: 20px 0; color: #ffffff;">Vagas Cadastradas</h2>
    <div id="vagasContainer" style="display: flex; flex-wrap: wrap; justify-content: center;"></div>
  </main>

  <footer style="text-align:center; margin: 40px 0; color: #ffffff;">
    <button id="apagarVagas">🗑️ Apagar Todas as Vagas</button>
    <p style="margin-top: 20px;">© 2025 vagas | Desenvolvido por Adriano de Oliveira Santos</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const vagas = JSON.parse(localStorage.getItem("vagas")) || [];
      const vagasContainer = document.getElementById("vagasContainer");

      if (vagas.length === 0) {
        vagasContainer.innerHTML = "<p>Nenhuma vaga cadastrada no momento.</p>";
      }

      vagas.forEach((vaga) => {
        const card = document.createElement("card-news");
        card.setAttribute("titulo", vaga.titulo);
        card.setAttribute("descricao", vaga.descricao);
        card.setAttribute("categoria", vaga.categoria);
        card.setAttribute("imagem", vaga.imagem);
        card.setAttribute("nome", vaga.nome); // <-- ADICIONADO: passa o nome
        // CORRIGIDO: Gera o link com o ID da vaga
        card.setAttribute("link", `pagina2.html?id=${vaga.id}`); 
        vagasContainer.appendChild(card);
      });
    });
  </script>
  
  <script>
    document.getElementById("apagarVagas").addEventListener("click", () => {
      if (confirm("Tem certeza que deseja apagar todas as vagas cadastradas?")) {
        localStorage.removeItem("vagas");
        alert("Todas as vagas foram apagadas com sucesso!");
        location.reload();
      }
    });
  </script>
</body>

</html>